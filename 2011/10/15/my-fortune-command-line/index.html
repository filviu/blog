<!doctype html><html lang=en-us><head><meta charset=utf-8><meta http-equiv=content-type content="text/html"><meta name=viewport content="width=device-width,initial-scale=1"><title itemprop=name>My fortune command lineâ€¦ | Silviu's Blog</title><meta property="og:title" content="My fortune command lineâ€¦ | Silviu's Blog"><meta name=twitter:title content="My fortune command lineâ€¦ | Silviu's Blog"><meta itemprop=name content="My fortune command lineâ€¦ | Silviu's Blog"><meta name=application-name content="My fortune command lineâ€¦ | Silviu's Blog"><meta property="og:site_name" content="Silviu's blog"><meta name=description content="Silviu's Blog"><meta itemprop=description content="Silviu's Blog"><meta property="og:description" content="Silviu's Blog"><meta name=twitter:description content="Silviu's Blog"><meta property="og:locale" content="en-us"><meta name=language content="en-us"><meta itemprop=image content="http://silviuvulcan.ro/blog/"><meta property="og:image" content="http://silviuvulcan.ro/blog/"><meta name=twitter:image content="http://silviuvulcan.ro/blog/"><meta name=twitter:image:src content="http://silviuvulcan.ro/blog/"><meta property="og:type" content="article"><meta property="og:article:published_time" content="2011-10-15T14:11:48Z"><meta property="article:published_time" content="2011-10-15T14:11:48Z"><meta property="og:article:author" content="Silviu"><meta property="article:author" content="Silviu"><meta name=author content="Silviu"><script defer type=application/ld+json>{"@context":"http://schema.org","@type":"Article","headline":"My fortune command lineâ€¦","author":{"@type":"Person","name":""},"datePublished":"2011-10-15","description":"","wordCount":1130,"mainEntityOfPage":"True","dateModified":"2011-10-15","image":{"@type":"imageObject","url":""},"publisher":{"@type":"Organization","name":"Silviu\u0027s Blog"}}</script><meta name=generator content="Hugo 0.114.1"><link rel=canonical href=http://silviuvulcan.ro/blog/2011/10/15/my-fortune-command-line/><link href=/blog/style.min.41175b050032d7b140ed7b503e6724d0166055787dc68ff6fb7e4d5d7b9aebf1.css rel=stylesheet><link href=/blog/code-highlight.min.706d31975fec544a864cb7f0d847a73ea55ca1df91bf495fd12a177138d807cf.css rel=stylesheet><link rel=apple-touch-icon sizes=180x180 href=/blog/icons/apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=/blog/icons/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=/blog/icons/favicon-16x16.png><link rel=mask-icon href=/blog/icons/safari-pinned-tab.svg><link rel="shortcut icon" href=/blog/favicon.ico><link rel=manifest href=http://silviuvulcan.ro/blog/site.webmanifest><meta name=msapplication-config content="/blog/browserconfig.xml"><meta name=msapplication-TileColor content="#2d89ef"><meta name=theme-color content="#434648"><link rel=icon type=image/svg+xml href=/blog/icons/favicon.svg></head><body data-theme=auto class=notransition><script src=/blog/js/theme.min.c3935b0f189ca3ede59e2261839900ccfa21c8dd0a494c42a3256b4366e03032.js integrity="sha256-w5NbDxico+3lniJhg5kAzPohyN0KSUxCoyVrQ2bgMDI="></script><div class=navbar role=navigation><nav class=menu aria-label="Main Navigation"><a href=http://silviuvulcan.ro/blog/ class=logo><svg xmlns="http://www.w3.org/2000/svg" width="25" height="25" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-home"><title>Home</title><path d="M3 9l9-7 9 7v11a2 2 0 01-2 2H5a2 2 0 01-2-2z"/><polyline points="9 22 9 12 15 12 15 22"/></svg></a><input type=checkbox id=menu-trigger class=menu-trigger>
<label for=menu-trigger><span class=menu-icon><svg xmlns="http://www.w3.org/2000/svg" width="25" height="25" stroke="currentcolor" fill="none" viewBox="0 0 14 14"><title>Menu</title><path stroke-linecap="round" stroke-linejoin="round" d="M10.595 7H3.40726"/><path stroke-linecap="round" stroke-linejoin="round" d="M10.5096 3.51488H3.49301"/><path stroke-linecap="round" stroke-linejoin="round" d="M10.5096 10.4851H3.49301"/><path stroke-linecap="round" stroke-linejoin="round" d="M.5 12.5V1.5c0-.552285.447715-1 1-1h11C13.0523.5 13.5.947715 13.5 1.5v11C13.5 13.0523 13.0523 13.5 12.5 13.5H1.5C.947715 13.5.5 13.0523.5 12.5z"/></svg></span></label><div class=trigger><ul class=trigger-container><li><a class=menu-link href=/blog/>Home</a></li><li><a class="menu-link active" href=/blog/posts/>Posts</a></li><li><a class=menu-link href=/blog/pages/about/>About</a></li><li class=menu-separator><span>|</span></li></ul><a id=mode href=#><svg xmlns="http://www.w3.org/2000/svg" class="mode-sunny" width="21" height="21" viewBox="0 0 14 14" stroke-width="1"><title>LIGHT</title><g><circle cx="7" cy="7" r="2.5" fill="none" stroke-linecap="round" stroke-linejoin="round"/><line x1="7" y1=".5" x2="7" y2="2.5" fill="none" stroke-linecap="round" stroke-linejoin="round"/><line x1="2.4" y1="2.4" x2="3.82" y2="3.82" fill="none" stroke-linecap="round" stroke-linejoin="round"/><line x1=".5" y1="7" x2="2.5" y2="7" fill="none" stroke-linecap="round" stroke-linejoin="round"/><line x1="2.4" y1="11.6" x2="3.82" y2="10.18" fill="none" stroke-linecap="round" stroke-linejoin="round"/><line x1="7" y1="13.5" x2="7" y2="11.5" fill="none" stroke-linecap="round" stroke-linejoin="round"/><line x1="11.6" y1="11.6" x2="10.18" y2="10.18" fill="none" stroke-linecap="round" stroke-linejoin="round"/><line x1="13.5" y1="7" x2="11.5" y2="7" fill="none" stroke-linecap="round" stroke-linejoin="round"/><line x1="11.6" y1="2.4" x2="10.18" y2="3.82" fill="none" stroke-linecap="round" stroke-linejoin="round"/></g></svg><svg xmlns="http://www.w3.org/2000/svg" class="mode-moon" width="21" height="21" viewBox="0 0 14 14" stroke-width="1"><title>DARK</title><g><circle cx="7" cy="7" r="2.5" fill="none" stroke-linecap="round" stroke-linejoin="round"/><line x1="7" y1=".5" x2="7" y2="2.5" fill="none" stroke-linecap="round" stroke-linejoin="round"/><line x1="2.4" y1="2.4" x2="3.82" y2="3.82" fill="none" stroke-linecap="round" stroke-linejoin="round"/><line x1=".5" y1="7" x2="2.5" y2="7" fill="none" stroke-linecap="round" stroke-linejoin="round"/><line x1="2.4" y1="11.6" x2="3.82" y2="10.18" fill="none" stroke-linecap="round" stroke-linejoin="round"/><line x1="7" y1="13.5" x2="7" y2="11.5" fill="none" stroke-linecap="round" stroke-linejoin="round"/><line x1="11.6" y1="11.6" x2="10.18" y2="10.18" fill="none" stroke-linecap="round" stroke-linejoin="round"/><line x1="13.5" y1="7" x2="11.5" y2="7" fill="none" stroke-linecap="round" stroke-linejoin="round"/><line x1="11.6" y1="2.4" x2="10.18" y2="3.82" fill="none" stroke-linecap="round" stroke-linejoin="round"/></g></svg></a></div></nav></div><div class="wrapper post"><main class=page-content aria-label=Content><article><header class=header><h1 class=header-title>My fortune command lineâ€¦</h1><div class=post-meta><time datetime=2011-10-15T14:11:48+00:00 itemprop=datePublished>15 Oct 2011</time></div></header><div class=page-content><p>I take my bash profile very seriously ðŸ™‚</p><p>I use:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>fortune fortunes fortunes-o fortunes2 forunes2-o 30% startrek
</span></span></code></pre></div><p>The above means to choose fortunes only from the 5 specified files and more it assures that I get startrek fortunes from time to time. Note that because lists are not equal in size it doesnt mean that I get them 30% of the time&mldr;</p><p>Below is the fortune man page:</p><h2 id=name>Name</h2><p>fortune - print a random, hopefully interesting, adage</p><h2 id=synopsis>Synopsis</h2><p><strong>fortune</strong> [<strong>-aefilosw</strong>] [<strong>-n</strong> <em>length</em>] [ <strong>-m</strong> <em>pattern</em>] [[<em>n%</em>] <em>file/dir/all</em>]</p><h2 id=description>Description</h2><p>When <strong>fortune</strong> is run with no arguments it prints out a random epigram. Epigrams are divided into several categories.</p><p><strong>Options</strong></p><p>The options are as follows:
<strong>-a</strong></p><p>Choose from all lists of maxims.</p><p><strong>-e</strong></p><p>Consider all fortune files to be of equal size (see discussion below on multiple files).</p><p><strong>-f</strong></p><p>Print out the list of files which would be searched, but don&rsquo;t print a fortune.</p><p><strong>-l</strong></p><dl><dt>Long dictums only. See <strong>-n</strong> on how &ldquo;long&rdquo; is defined in this sense.</dt><dt><strong>-m</strong> <em>pattern</em></dt><dd>Print out all fortunes which match the basic regular expression <em>pattern</em>. The syntax of these expressions depends on how your system defines <strong>re_comp</strong>(3) or <strong>regcomp</strong>(3), but it should nevertheless be similar to the syntax used in <strong>grep</strong>(1).</dd><dd>The fortunes are output to standard output, while the names of the file from which each fortune comes are printed to standard error. Either or both can be redirected; if standard output is redirected to a file, the result is a valid fortunes database file. If standard error is <em>also</em> redirected to this file, the result is <em>still valid</em>, <strong>but there will be &ldquo;bogus&rdquo; fortunes</strong>, i.e. the filenames themselves, in parentheses. This can be useful if you wish to remove the gathered matches from their original files, since each filename-record will precede the records from the file it names.</dd><dt><strong>-n</strong> <em>length</em></dt><dd>Set the longest fortune length (in characters) considered to be &ldquo;short&rdquo; (the default is 160). All fortunes longer than this are considered &ldquo;long&rdquo;. Be careful! If you set the length too short and ask for short fortunes, or too long and ask for long ones, fortune goes into a never-ending thrash loop.</dd></dl><p><strong>-s</strong></p><p>Short apothegms only. See <strong>-n</strong> on which fortunes are considered &ldquo;short&rdquo;.</p><p><strong>-i</strong></p><p>Ignore case for <em>-m</em> patterns.</p><p><strong>-w</strong></p><p>Wait before termination for an amount of time calculated from the number of characters in the message. This is useful if it is executed as part of the logout procedure to guarantee that the message can be read before the screen is cleared.
The user may specify alternate sayings. You can specify a specific file, a directory which contains one or more files, or the special word <em>all</em> which says to use all the standard databases. Any of these may be preceded by a percentage, which is a number <em>n</em> between 0 and 100 inclusive, followed by a <em>%</em>. If it is, there will be a _n_percent probability that an adage will be picked from that file or directory. If the percentages do not sum to 100, and there are specifications without percentages, the remaining percent will apply to those files and/or directories, in which case the probability of selecting from one of them will be based on their relative sizes.</p><dl><dt>As an example, given two databases <em>funny</em> and <em>not-funny</em>, with <em>funny</em> twice as big (in number of fortunes, not raw file size), saying</dt><dd><p><strong>fortune</strong> <em>funny not-funny</em></p></dd><dt>will get you fortunes out of <em>funny</em> two-thirds of the time. The command</dt><dd><strong>fortune</strong> 90% <em>funny</em> 10% <em>not-funny</em></dd></dl><p>will pick out 90% of its fortunes from <em>funny</em>(the &ldquo;10% not-funny&rdquo; is unnecessary, since 10% is all that&rsquo;s left).</p><dl><dt>The <strong>-e</strong> option says to consider all files equal; thus</dt><dd><p><strong>fortune -e</strong> <em>funny not-funny</em></p></dd><dt>is equivalent to</dt><dd><strong>fortune</strong> 50% <em>funny</em> 50% <em>not-funny</em></dd></dl><h2 id=files>Files</h2><p>Note: these are the defaults as defined at compile time.</p><dl><dt><em>/usr/share/games/fortune</em></dt><dd>Directory for innoffensive fortunes.</dd><dt><em>/usr/share/games/fortune/off</em></dt><dd>Directory for offensive fortunes.</dd></dl><p>If a particular set of fortunes is particularly unwanted, there is an easy solution: delete the associated <em>.dat</em> file. This leaves the data intact, should the file later be wanted, but since <strong>fortune</strong> no longer finds the pointers file, it ignores the text file.</p><h2 id=bugs>Bugs</h2><p>The division of fortunes into offensive and non-offensive by directory, rather than via the &lsquo;-o&rsquo; file infix, is not 100% compatible with original BSD fortune. Although the &lsquo;-o&rsquo; infix is recognised as referring to an offensive database, the offensive database files still need to be in a seperate directory. The workaround, of course, is to move the &lsquo;-o&rsquo; files into the offensive directory (with or without renaming), and to use the <strong>-a</strong> option.</p><p>The supplied fortune databases have been attacked, in order to correct orthographical and grammatical errors, and particularly to reduce redundancy and repetition and redundancy. But especially to avoid repititiousness. This has not been a complete success. In the process, some fortunes may also have been lost.</p><p>The fortune databases are now divided into a larger number of smaller files, some organized by format (poetry, definitions), and some by content (religion, politics). There are parallel files in the main directory and in the offensive files directory (e.g., fortunes/definitions and fortunes/off/definitions). Not all the potentially offensive fortunes are in the offensive fortunes files, nor are all the fortunes in the offensive files potentially offensive, probably, though a strong attempt has been made to achieve greater consistency. Also, a better division might be made.</p><h2 id=history>History</h2><p>This version of fortune is based on the NetBSD fortune 1.4, but with a number of bug fixes and enhancements.</p><p>The original fortune/strfile format used a single file; strfile read the text file and converted it to null-delimited strings, which were stored after the table of pointers in the .dat file. By NetBSD fortune 1.4, this had changed to two separate files: the .dat file was only the header (the table of pointers, plus flags; see <em>strfile.h</em>), and the text strings were left in their own file. The potential problem with this is that text file and header file may get out of synch, but the advantage is that the text files can be easily edited without resorting to unstr, and there is a potential savings in disk space (on the assumption that the sysadmin kept both .dat file with strings and the text file).</p><p>Many of the enhancements made over the NetBSD version assumed a Linux system, and thus caused it to fail under other platforms, including BSD. The source code has since been made more generic, and currently works on SunOS 4.x as well as Linux, with support for more platforms expected in the future. Note that some bugs were inadvertantly discovered and fixed during this process.</p><p>At a guess, a great many people have worked on this program, many without leaving attributions.</p><h2 id=see-also>See Also</h2><p><strong>re_comp</strong>(3), <strong>regcomp</strong>(3), <strong>strfile</strong>(1), <strong>unstr</strong>(1)</p><h2 id=referenced-by>Referenced By</h2><p><strong>random</strong>(6), <strong>rot13</strong>(6), <strong>wtfindex</strong>(6)</p></div></article></main></div><footer class=footer><span class=footer_item></span>&nbsp;<div class=footer_social-icons><a href=https://github.com/filviu target=_blank rel="noopener noreferrer me" title=Github><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37.0 00-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44.0 0020 4.77 5.07 5.07.0 0019.91 1S18.73.65 16 2.48a13.38 13.38.0 00-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07.0 005 4.77 5.44 5.44.0 003.5 8.55c0 5.42 3.3 6.61 6.44 7A3.37 3.37.0 009 18.13V22"/></svg></a><a href=https://fosstodon.org/@filviu target=_blank rel="noopener noreferrer me" title=Mastodon><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21.58 13.913c-.29 1.469-2.592 3.121-5.238 3.396-1.379.184-2.737.368-4.185.276-2.368-.092-4.237-.551-4.237-.551.0.184.014.459.043.643.308 2.294 2.317 2.478 4.22 2.57 1.922.0 3.633-.46 3.633-.46l.079 1.653s-1.344.734-3.738.918c-1.32.091-2.96-.092-4.869-.551-4.14-1.102-4.853-5.507-4.961-10.005-.034-1.285-.013-2.57-.013-3.58.0-4.589 3-5.966 3-5.966 1.513-.734 4.11-1.01 6.808-1.01h.067c2.699.0 5.296.276 6.81 1.01.0.0 3 1.377 3 5.967.0.0.037 3.304-.419 5.69" stroke="currentcolor"/><path d="M17.832 8.633v5h-1.978V8.78c0-1.023-.43-1.542-1.29-1.542-.95.0-1.427.616-1.427 1.834v2.655H11.17V9.072c0-1.218-.476-1.834-1.427-1.834-.86.0-1.29.52-1.29 1.542v4.852H6.475V8.633c0-1.022.26-1.834.782-2.434.538-.6 1.243-.909 2.118-.909 1.012.0 1.779.39 2.286 1.169l.492.827.493-.827c.507-.78 1.274-1.169 2.286-1.169.875.0 1.58.308 2.118.909.522.6.782 1.412.782 2.434" fill="currentcolor" stroke="none"/></svg></a><a href=index.xml target=_blank rel="noopener noreferrer me" title=Rss><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M4 11a9 9 0 019 9"/><path d="M4 4a16 16 0 0116 16"/><circle cx="5" cy="19" r="1"/></svg></a></div><small class=footer_copyright>Â© 2023 Silviu Vulcan.
Powered by <a href=https://github.com/hugo-sid/hugo-blog-awesome target=_blank rel="noreferrer noopener">Hugo blog awesome</a>
theme on
<a href=https://gohugo.io target=_blank rel="noreferrer noopener">Hugo</a>.</small></footer><a href=# title="Go to top" id=totop><svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" fill="currentcolor" stroke="currentcolor" viewBox="0 96 960 960"><path d="M283 704.739 234.261 656 480 410.261 725.739 656 677 704.739l-197-197-197 197z"/></svg></a><script src=http://silviuvulcan.ro/blog/js/main.min.35f435a5d8eac613c52daa28d8af544a4512337d3e95236e4a4978417b8dcb2f.js integrity="sha256-NfQ1pdjqxhPFLaoo2K9USkUSM30+lSNuSkl4QXuNyy8="></script></body></html>