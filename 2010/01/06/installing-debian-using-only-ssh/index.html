<!doctype html><html lang=en-us><head><meta charset=utf-8><meta http-equiv=content-type content="text/html"><meta name=viewport content="width=device-width,initial-scale=1"><title itemprop=name>Installing Debian using only SSH | Silviu's Blog</title><meta property="og:title" content="Installing Debian using only SSH | Silviu's Blog"><meta name=twitter:title content="Installing Debian using only SSH | Silviu's Blog"><meta itemprop=name content="Installing Debian using only SSH | Silviu's Blog"><meta name=application-name content="Installing Debian using only SSH | Silviu's Blog"><meta property="og:site_name" content="Silviu's blog"><meta name=description content="Silviu's Blog"><meta itemprop=description content="Silviu's Blog"><meta property="og:description" content="Silviu's Blog"><meta name=twitter:description content="Silviu's Blog"><meta property="og:locale" content="en-us"><meta name=language content="en-us"><meta itemprop=image content="https://silviuvulcan.ro/blog/"><meta property="og:image" content="https://silviuvulcan.ro/blog/"><meta name=twitter:image content="https://silviuvulcan.ro/blog/"><meta name=twitter:image:src content="https://silviuvulcan.ro/blog/"><meta property="og:type" content="article"><meta property="og:article:published_time" content="2010-01-06T11:40:32Z"><meta property="article:published_time" content="2010-01-06T11:40:32Z"><meta property="og:article:author" content="Silviu"><meta property="article:author" content="Silviu"><meta name=author content="Silviu"><script defer type=application/ld+json>{"@context":"http://schema.org","@type":"Article","headline":"Installing Debian using only SSH","author":{"@type":"Person","name":""},"datePublished":"2010-01-06","description":"","wordCount":450,"mainEntityOfPage":"True","dateModified":"2010-01-06","image":{"@type":"imageObject","url":""},"publisher":{"@type":"Organization","name":"Silviu\u0027s Blog"}}</script><meta name=generator content="Hugo 0.115.0"><link rel=canonical href=https://silviuvulcan.ro/blog/2010/01/06/installing-debian-using-only-ssh/><link href=/blog/style.min.41175b050032d7b140ed7b503e6724d0166055787dc68ff6fb7e4d5d7b9aebf1.css rel=stylesheet><link href=/blog/code-highlight.min.706d31975fec544a864cb7f0d847a73ea55ca1df91bf495fd12a177138d807cf.css rel=stylesheet><link rel=apple-touch-icon sizes=180x180 href=/blog/icons/apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=/blog/icons/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=/blog/icons/favicon-16x16.png><link rel=mask-icon href=/blog/icons/safari-pinned-tab.svg><link rel="shortcut icon" href=/blog/favicon.ico><link rel=manifest href=https://silviuvulcan.ro/blog/site.webmanifest><meta name=msapplication-config content="/blog/browserconfig.xml"><meta name=msapplication-TileColor content="#2d89ef"><meta name=theme-color content="#434648"><link rel=icon type=image/svg+xml href=/blog/icons/favicon.svg></head><body data-theme=auto class=notransition><script src=/blog/js/theme.min.c3935b0f189ca3ede59e2261839900ccfa21c8dd0a494c42a3256b4366e03032.js integrity="sha256-w5NbDxico+3lniJhg5kAzPohyN0KSUxCoyVrQ2bgMDI="></script><div class=navbar role=navigation><nav class=menu aria-label="Main Navigation"><a href=https://silviuvulcan.ro/blog/ class=logo><svg xmlns="http://www.w3.org/2000/svg" width="25" height="25" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-home"><title>Home</title><path d="M3 9l9-7 9 7v11a2 2 0 01-2 2H5a2 2 0 01-2-2z"/><polyline points="9 22 9 12 15 12 15 22"/></svg></a><input type=checkbox id=menu-trigger class=menu-trigger>
<label for=menu-trigger><span class=menu-icon><svg xmlns="http://www.w3.org/2000/svg" width="25" height="25" stroke="currentcolor" fill="none" viewBox="0 0 14 14"><title>Menu</title><path stroke-linecap="round" stroke-linejoin="round" d="M10.595 7H3.40726"/><path stroke-linecap="round" stroke-linejoin="round" d="M10.5096 3.51488H3.49301"/><path stroke-linecap="round" stroke-linejoin="round" d="M10.5096 10.4851H3.49301"/><path stroke-linecap="round" stroke-linejoin="round" d="M.5 12.5V1.5c0-.552285.447715-1 1-1h11C13.0523.5 13.5.947715 13.5 1.5v11C13.5 13.0523 13.0523 13.5 12.5 13.5H1.5C.947715 13.5.5 13.0523.5 12.5z"/></svg></span></label><div class=trigger><ul class=trigger-container><li><a class=menu-link href=/blog/>Home</a></li><li><a class="menu-link active" href=/blog/posts/>Posts</a></li><li><a class=menu-link href=/blog/pages/about/>About</a></li><li class=menu-separator><span>|</span></li></ul><a id=mode href=#><svg xmlns="http://www.w3.org/2000/svg" class="mode-sunny" width="21" height="21" viewBox="0 0 14 14" stroke-width="1"><title>LIGHT</title><g><circle cx="7" cy="7" r="2.5" fill="none" stroke-linecap="round" stroke-linejoin="round"/><line x1="7" y1=".5" x2="7" y2="2.5" fill="none" stroke-linecap="round" stroke-linejoin="round"/><line x1="2.4" y1="2.4" x2="3.82" y2="3.82" fill="none" stroke-linecap="round" stroke-linejoin="round"/><line x1=".5" y1="7" x2="2.5" y2="7" fill="none" stroke-linecap="round" stroke-linejoin="round"/><line x1="2.4" y1="11.6" x2="3.82" y2="10.18" fill="none" stroke-linecap="round" stroke-linejoin="round"/><line x1="7" y1="13.5" x2="7" y2="11.5" fill="none" stroke-linecap="round" stroke-linejoin="round"/><line x1="11.6" y1="11.6" x2="10.18" y2="10.18" fill="none" stroke-linecap="round" stroke-linejoin="round"/><line x1="13.5" y1="7" x2="11.5" y2="7" fill="none" stroke-linecap="round" stroke-linejoin="round"/><line x1="11.6" y1="2.4" x2="10.18" y2="3.82" fill="none" stroke-linecap="round" stroke-linejoin="round"/></g></svg><svg xmlns="http://www.w3.org/2000/svg" class="mode-moon" width="21" height="21" viewBox="0 0 14 14" stroke-width="1"><title>DARK</title><g><circle cx="7" cy="7" r="2.5" fill="none" stroke-linecap="round" stroke-linejoin="round"/><line x1="7" y1=".5" x2="7" y2="2.5" fill="none" stroke-linecap="round" stroke-linejoin="round"/><line x1="2.4" y1="2.4" x2="3.82" y2="3.82" fill="none" stroke-linecap="round" stroke-linejoin="round"/><line x1=".5" y1="7" x2="2.5" y2="7" fill="none" stroke-linecap="round" stroke-linejoin="round"/><line x1="2.4" y1="11.6" x2="3.82" y2="10.18" fill="none" stroke-linecap="round" stroke-linejoin="round"/><line x1="7" y1="13.5" x2="7" y2="11.5" fill="none" stroke-linecap="round" stroke-linejoin="round"/><line x1="11.6" y1="11.6" x2="10.18" y2="10.18" fill="none" stroke-linecap="round" stroke-linejoin="round"/><line x1="13.5" y1="7" x2="11.5" y2="7" fill="none" stroke-linecap="round" stroke-linejoin="round"/><line x1="11.6" y1="2.4" x2="10.18" y2="3.82" fill="none" stroke-linecap="round" stroke-linejoin="round"/></g></svg></a></div></nav></div><div class="wrapper post"><main class=page-content aria-label=Content><article><header class=header><h1 class=header-title>Installing Debian using only SSH</h1><div class=post-meta><time datetime=2010-01-06T11:40:32+00:00 itemprop=datePublished>6 Jan 2010</time></div></header><div class=page-content><p>I have a headless machine at home that I plan to use as a backup and development server. Even though I&rsquo;m a Skackware guy I chose to install Debian on it. Of course I could have hooked a monitor and keyboard to it but for the sake of exercise I wanted to see if it&rsquo;s possible to install debian using ssh from the very beginning.</p><p>The short answer: <strong>it&rsquo;s possible &mldr; maybe</strong>. Your headless machine should already be set to boot of cd if one is present, otherwise it will not work.</p><p>Here are the steps needed to start you off:</p><p><strong>1. Download the netinst cd image</strong></p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>wget http://mirrors.kernel.org/debian-cd/5.0.3/i386/iso-cd/debian-503-i386-netinst.iso
</span></span></code></pre></div><p><strong>2. Mount the ISO to a folder, let&rsquo;s call it isoorig</strong></p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>mkdir isoorig
</span></span><span class=line><span class=cl>mount -o loop -t iso9660 debian-503-i386-netinst.iso isoorig
</span></span></code></pre></div><p><strong>3. Extract to new folder called isonew</strong></p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>mkdir isonew
</span></span><span class=line><span class=cl>rsync -a -H –exclude<span class=o>=</span>TRANS.TBL isoorig/ isonew
</span></span></code></pre></div><p><strong>4. Change the menu to load SSH on boot by default</strong></p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>/isonew# nano isolinux/txt.cfg
</span></span></code></pre></div><p>DELETE:
remove &ldquo;menu default&rdquo; from &ldquo;label install&rdquo;</p><p>ADD:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>label netinstall
</span></span><span class=line><span class=cl>menu label ^Install Over SSH
</span></span><span class=line><span class=cl>menu default
</span></span><span class=line><span class=cl>kernel /install.386/vmlinuz
</span></span><span class=line><span class=cl>append <span class=nv>auto</span><span class=o>=</span><span class=nb>true</span> <span class=nv>vga</span><span class=o>=</span>normal <span class=nv>file</span><span class=o>=</span>/cdrom/preseed.cfg <span class=nv>initrd</span><span class=o>=</span>/install.386/initrd.gz <span class=nv>locale</span><span class=o>=</span>en_US console-keymaps-at/keymap<span class=o>=</span>us
</span></span></code></pre></div><p>CHANGE:</p><p>&ldquo;default install&rdquo; to &ldquo;default netinstall&rdquo;</p><p>EDIT: both files below and change &ldquo;timeout 0″ to &ldquo;timeout 4″ to make it auto select netinstall</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>nano isolinux/isolinux.cfg
</span></span><span class=line><span class=cl>nano isolinux/prompt.cfg
</span></span></code></pre></div><p><strong>5. Create preseed.cfg file</strong></p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>nano isonew/preseed.cfg
</span></span></code></pre></div><p><strong>6. PASTE this to the preseed file:</strong></p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1>#### Contents of the preconfiguration file</span>
</span></span><span class=line><span class=cl><span class=c1>### Localization</span>
</span></span><span class=line><span class=cl><span class=c1># Locale sets language and country.</span>
</span></span><span class=line><span class=cl>d-i debian-installer/locale <span class=k>select</span> en_US
</span></span><span class=line><span class=cl><span class=c1># Keyboard selection.</span>
</span></span><span class=line><span class=cl>d-i console-keymaps-at/keymap <span class=k>select</span> us
</span></span><span class=line><span class=cl><span class=c1>### Network configuration</span>
</span></span><span class=line><span class=cl><span class=c1># netcfg will choose an interface that has link if possible. This makes it</span>
</span></span><span class=line><span class=cl><span class=c1># skip displaying a list if there is more than one interface.</span>
</span></span><span class=line><span class=cl>d-i netcfg/choose_interface <span class=k>select</span> auto
</span></span><span class=line><span class=cl><span class=c1># Any hostname and domain names assigned from dhcp take precedence over</span>
</span></span><span class=line><span class=cl><span class=c1># values set here. However, setting the values still prevents the questions</span>
</span></span><span class=line><span class=cl><span class=c1># from being shown, even if values come from dhcp.</span>
</span></span><span class=line><span class=cl>d-i netcfg/get_hostname string newdebian
</span></span><span class=line><span class=cl>d-i netcfg/get_domain string <span class=nb>local</span>
</span></span><span class=line><span class=cl><span class=c1># Disable that annoying WEP key dialog.</span>
</span></span><span class=line><span class=cl>d-i netcfg/wireless_wep string
</span></span><span class=line><span class=cl><span class=c1># The wacky dhcp hostname that some ISPs use as a password of sorts.</span>
</span></span><span class=line><span class=cl><span class=c1>#d-i netcfg/dhcp_hostname string radish</span>
</span></span><span class=line><span class=cl>d-i preseed/early_command string anna-install network-console
</span></span><span class=line><span class=cl><span class=c1># Setup ssh password</span>
</span></span><span class=line><span class=cl>d-i network-console/password password install
</span></span><span class=line><span class=cl>d-i network-console/password-again password install
</span></span></code></pre></div><p><strong>7. Recreate md5sum.txt file</strong></p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>md5sum <span class=sb>`</span>find -follow -type f<span class=sb>`</span> &gt; md5sum.txt
</span></span></code></pre></div><p><strong>8. Create your new iso image</strong></p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>mkisofs -o ../custom_install.iso -r -J -no-emul-boot -boot-load-size <span class=m>4</span> -boot-info-table -b isolinux/isolinux.bin -c isolinux/boot.cat ../isonew
</span></span></code></pre></div><p>The image you just obtained is ready to burn. This loads everything automatically and goes to the SSH screen.</p><p>Thanks go to people on various debian forums, this information was collected via trial and error and by combining info found around. Have fun with your shiny new headless debian box.</p></div></article></main></div><footer class=footer><span class=footer_item></span>&nbsp;<div class=footer_social-icons><a href=https://github.com/filviu target=_blank rel="noopener noreferrer me" title=Github><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37.0 00-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44.0 0020 4.77 5.07 5.07.0 0019.91 1S18.73.65 16 2.48a13.38 13.38.0 00-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07.0 005 4.77 5.44 5.44.0 003.5 8.55c0 5.42 3.3 6.61 6.44 7A3.37 3.37.0 009 18.13V22"/></svg></a><a href=https://fosstodon.org/@filviu target=_blank rel="noopener noreferrer me" title=Mastodon><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21.58 13.913c-.29 1.469-2.592 3.121-5.238 3.396-1.379.184-2.737.368-4.185.276-2.368-.092-4.237-.551-4.237-.551.0.184.014.459.043.643.308 2.294 2.317 2.478 4.22 2.57 1.922.0 3.633-.46 3.633-.46l.079 1.653s-1.344.734-3.738.918c-1.32.091-2.96-.092-4.869-.551-4.14-1.102-4.853-5.507-4.961-10.005-.034-1.285-.013-2.57-.013-3.58.0-4.589 3-5.966 3-5.966 1.513-.734 4.11-1.01 6.808-1.01h.067c2.699.0 5.296.276 6.81 1.01.0.0 3 1.377 3 5.967.0.0.037 3.304-.419 5.69" stroke="currentcolor"/><path d="M17.832 8.633v5h-1.978V8.78c0-1.023-.43-1.542-1.29-1.542-.95.0-1.427.616-1.427 1.834v2.655H11.17V9.072c0-1.218-.476-1.834-1.427-1.834-.86.0-1.29.52-1.29 1.542v4.852H6.475V8.633c0-1.022.26-1.834.782-2.434.538-.6 1.243-.909 2.118-.909 1.012.0 1.779.39 2.286 1.169l.492.827.493-.827c.507-.78 1.274-1.169 2.286-1.169.875.0 1.58.308 2.118.909.522.6.782 1.412.782 2.434" fill="currentcolor" stroke="none"/></svg></a><a href=index.xml target=_blank rel="noopener noreferrer me" title=Rss><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M4 11a9 9 0 019 9"/><path d="M4 4a16 16 0 0116 16"/><circle cx="5" cy="19" r="1"/></svg></a></div><small class=footer_copyright>© 2023 Silviu Vulcan.
Powered by <a href=https://github.com/hugo-sid/hugo-blog-awesome target=_blank rel="noreferrer noopener">Hugo blog awesome</a>
theme on
<a href=https://gohugo.io target=_blank rel="noreferrer noopener">Hugo</a>.</small></footer><a href=# title="Go to top" id=totop><svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" fill="currentcolor" stroke="currentcolor" viewBox="0 96 960 960"><path d="M283 704.739 234.261 656 480 410.261 725.739 656 677 704.739l-197-197-197 197z"/></svg></a><script src=https://silviuvulcan.ro/blog/js/main.min.35f435a5d8eac613c52daa28d8af544a4512337d3e95236e4a4978417b8dcb2f.js integrity="sha256-NfQ1pdjqxhPFLaoo2K9USkUSM30+lSNuSkl4QXuNyy8="></script></body></html>